<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pakmall.mapper.MemberOrderMapper">

	<select id="orderInfo_list" resultType="com.pakmall.domain.OrderVO">
		<![CDATA[
		select odr_code, mem_id, odr_name, odr_zipcode, odr_addr, odr_addr_d, odr_phone, odr_total_price, odr_date
		from (
		select /*+ index_desc(order_tbl pk_odr_code ) */ rownum rn, odr_code, mem_id, odr_name, odr_zipcode,
		 	odr_addr, odr_addr_d, odr_phone, odr_total_price, odr_date
	    	from order_tbl 
	    where odr_code > 0 
	    and rownum > 0 
	    and 
	 	]]> 
	 	<!-- 
	 	<include refid="criteria"></include>
	 	 -->
	 	 <![CDATA[   	
	    	rownum <= #{pageNum} * #{amount}
	    and mem_id = #{mem_id}
	    )
	    
		where rn  > (#{pageNum}-1) * #{amount}
		]]>
		
	</select>
	
	<!-- 페이징 -->
	<select id="getTotalCountOrder" resultType="int" >
		select count(*) from order_tbl where 
		
		<!-- 
		<include refid="criteria"></include>
		 -->
		 
		<![CDATA[
		odr_code > 0
		]]>
	</select>

</mapper>